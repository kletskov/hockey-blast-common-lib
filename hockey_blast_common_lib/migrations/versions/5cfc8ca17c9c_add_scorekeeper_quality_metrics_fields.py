"""Add scorekeeper quality metrics fields

Revision ID: 5cfc8ca17c9c
Revises: 54c6ac519599
Create Date: 2025-09-28 00:50:46.648247

"""
from alembic import op
import sqlalchemy as sa


# revision identifiers, used by Alembic.
revision = '5cfc8ca17c9c'
down_revision = '54c6ac519599'
branch_labels = None
depends_on = None


def upgrade():
    # ### commands auto generated by Alembic - please adjust! ###
    with op.batch_alter_table('division_stats_daily_scorekeeper', schema=None) as batch_op:
        batch_op.add_column(sa.Column('total_saves_recorded', sa.Integer(), nullable=True))
        batch_op.add_column(sa.Column('total_saves_recorded_rank', sa.Integer(), nullable=True))
        batch_op.add_column(sa.Column('avg_saves_per_game', sa.Float(), nullable=True))
        batch_op.add_column(sa.Column('avg_saves_per_game_rank', sa.Integer(), nullable=True))
        batch_op.add_column(sa.Column('avg_max_saves_per_5sec', sa.Float(), nullable=True))
        batch_op.add_column(sa.Column('avg_max_saves_per_5sec_rank', sa.Integer(), nullable=True))
        batch_op.add_column(sa.Column('avg_max_saves_per_20sec', sa.Float(), nullable=True))
        batch_op.add_column(sa.Column('avg_max_saves_per_20sec_rank', sa.Integer(), nullable=True))
        batch_op.add_column(sa.Column('peak_max_saves_per_5sec', sa.Integer(), nullable=True))
        batch_op.add_column(sa.Column('peak_max_saves_per_5sec_rank', sa.Integer(), nullable=True))
        batch_op.add_column(sa.Column('peak_max_saves_per_20sec', sa.Integer(), nullable=True))
        batch_op.add_column(sa.Column('peak_max_saves_per_20sec_rank', sa.Integer(), nullable=True))
        batch_op.add_column(sa.Column('quality_score', sa.Float(), nullable=True))
        batch_op.add_column(sa.Column('quality_score_rank', sa.Integer(), nullable=True))
        batch_op.create_index('idx_division_daily_avg_max_saves_per_20sec1', ['division_id', 'avg_max_saves_per_20sec'], unique=False)
        batch_op.create_index('idx_division_daily_avg_max_saves_per_5sec1', ['division_id', 'avg_max_saves_per_5sec'], unique=False)
        batch_op.create_index('idx_division_daily_avg_saves_per_game1', ['division_id', 'avg_saves_per_game'], unique=False)
        batch_op.create_index('idx_division_daily_peak_max_saves_per_20sec1', ['division_id', 'peak_max_saves_per_20sec'], unique=False)
        batch_op.create_index('idx_division_daily_peak_max_saves_per_5sec1', ['division_id', 'peak_max_saves_per_5sec'], unique=False)
        batch_op.create_index('idx_division_daily_quality_score1', ['division_id', 'quality_score'], unique=False)
        batch_op.create_index('idx_division_daily_total_saves_recorded1', ['division_id', 'total_saves_recorded'], unique=False)

    with op.batch_alter_table('division_stats_scorekeeper', schema=None) as batch_op:
        batch_op.add_column(sa.Column('total_saves_recorded', sa.Integer(), nullable=True))
        batch_op.add_column(sa.Column('total_saves_recorded_rank', sa.Integer(), nullable=True))
        batch_op.add_column(sa.Column('avg_saves_per_game', sa.Float(), nullable=True))
        batch_op.add_column(sa.Column('avg_saves_per_game_rank', sa.Integer(), nullable=True))
        batch_op.add_column(sa.Column('avg_max_saves_per_5sec', sa.Float(), nullable=True))
        batch_op.add_column(sa.Column('avg_max_saves_per_5sec_rank', sa.Integer(), nullable=True))
        batch_op.add_column(sa.Column('avg_max_saves_per_20sec', sa.Float(), nullable=True))
        batch_op.add_column(sa.Column('avg_max_saves_per_20sec_rank', sa.Integer(), nullable=True))
        batch_op.add_column(sa.Column('peak_max_saves_per_5sec', sa.Integer(), nullable=True))
        batch_op.add_column(sa.Column('peak_max_saves_per_5sec_rank', sa.Integer(), nullable=True))
        batch_op.add_column(sa.Column('peak_max_saves_per_20sec', sa.Integer(), nullable=True))
        batch_op.add_column(sa.Column('peak_max_saves_per_20sec_rank', sa.Integer(), nullable=True))
        batch_op.add_column(sa.Column('quality_score', sa.Float(), nullable=True))
        batch_op.add_column(sa.Column('quality_score_rank', sa.Integer(), nullable=True))
        batch_op.create_index('idx_division_avg_max_saves_per_20sec1', ['division_id', 'avg_max_saves_per_20sec'], unique=False)
        batch_op.create_index('idx_division_avg_max_saves_per_5sec1', ['division_id', 'avg_max_saves_per_5sec'], unique=False)
        batch_op.create_index('idx_division_avg_saves_per_game1', ['division_id', 'avg_saves_per_game'], unique=False)
        batch_op.create_index('idx_division_peak_max_saves_per_20sec1', ['division_id', 'peak_max_saves_per_20sec'], unique=False)
        batch_op.create_index('idx_division_peak_max_saves_per_5sec1', ['division_id', 'peak_max_saves_per_5sec'], unique=False)
        batch_op.create_index('idx_division_quality_score1', ['division_id', 'quality_score'], unique=False)
        batch_op.create_index('idx_division_total_saves_recorded1', ['division_id', 'total_saves_recorded'], unique=False)

    with op.batch_alter_table('division_stats_weekly_scorekeeper', schema=None) as batch_op:
        batch_op.add_column(sa.Column('total_saves_recorded', sa.Integer(), nullable=True))
        batch_op.add_column(sa.Column('total_saves_recorded_rank', sa.Integer(), nullable=True))
        batch_op.add_column(sa.Column('avg_saves_per_game', sa.Float(), nullable=True))
        batch_op.add_column(sa.Column('avg_saves_per_game_rank', sa.Integer(), nullable=True))
        batch_op.add_column(sa.Column('avg_max_saves_per_5sec', sa.Float(), nullable=True))
        batch_op.add_column(sa.Column('avg_max_saves_per_5sec_rank', sa.Integer(), nullable=True))
        batch_op.add_column(sa.Column('avg_max_saves_per_20sec', sa.Float(), nullable=True))
        batch_op.add_column(sa.Column('avg_max_saves_per_20sec_rank', sa.Integer(), nullable=True))
        batch_op.add_column(sa.Column('peak_max_saves_per_5sec', sa.Integer(), nullable=True))
        batch_op.add_column(sa.Column('peak_max_saves_per_5sec_rank', sa.Integer(), nullable=True))
        batch_op.add_column(sa.Column('peak_max_saves_per_20sec', sa.Integer(), nullable=True))
        batch_op.add_column(sa.Column('peak_max_saves_per_20sec_rank', sa.Integer(), nullable=True))
        batch_op.add_column(sa.Column('quality_score', sa.Float(), nullable=True))
        batch_op.add_column(sa.Column('quality_score_rank', sa.Integer(), nullable=True))
        batch_op.create_index('idx_division_weekly_avg_max_saves_per_20sec1', ['division_id', 'avg_max_saves_per_20sec'], unique=False)
        batch_op.create_index('idx_division_weekly_avg_max_saves_per_5sec1', ['division_id', 'avg_max_saves_per_5sec'], unique=False)
        batch_op.create_index('idx_division_weekly_avg_saves_per_game1', ['division_id', 'avg_saves_per_game'], unique=False)
        batch_op.create_index('idx_division_weekly_peak_max_saves_per_20sec1', ['division_id', 'peak_max_saves_per_20sec'], unique=False)
        batch_op.create_index('idx_division_weekly_peak_max_saves_per_5sec1', ['division_id', 'peak_max_saves_per_5sec'], unique=False)
        batch_op.create_index('idx_division_weekly_quality_score1', ['division_id', 'quality_score'], unique=False)
        batch_op.create_index('idx_division_weekly_total_saves_recorded1', ['division_id', 'total_saves_recorded'], unique=False)

    with op.batch_alter_table('org_stats_daily_scorekeeper', schema=None) as batch_op:
        batch_op.add_column(sa.Column('total_saves_recorded', sa.Integer(), nullable=True))
        batch_op.add_column(sa.Column('total_saves_recorded_rank', sa.Integer(), nullable=True))
        batch_op.add_column(sa.Column('avg_saves_per_game', sa.Float(), nullable=True))
        batch_op.add_column(sa.Column('avg_saves_per_game_rank', sa.Integer(), nullable=True))
        batch_op.add_column(sa.Column('avg_max_saves_per_5sec', sa.Float(), nullable=True))
        batch_op.add_column(sa.Column('avg_max_saves_per_5sec_rank', sa.Integer(), nullable=True))
        batch_op.add_column(sa.Column('avg_max_saves_per_20sec', sa.Float(), nullable=True))
        batch_op.add_column(sa.Column('avg_max_saves_per_20sec_rank', sa.Integer(), nullable=True))
        batch_op.add_column(sa.Column('peak_max_saves_per_5sec', sa.Integer(), nullable=True))
        batch_op.add_column(sa.Column('peak_max_saves_per_5sec_rank', sa.Integer(), nullable=True))
        batch_op.add_column(sa.Column('peak_max_saves_per_20sec', sa.Integer(), nullable=True))
        batch_op.add_column(sa.Column('peak_max_saves_per_20sec_rank', sa.Integer(), nullable=True))
        batch_op.add_column(sa.Column('quality_score', sa.Float(), nullable=True))
        batch_op.add_column(sa.Column('quality_score_rank', sa.Integer(), nullable=True))
        batch_op.create_index('idx_org_daily_avg_max_saves_per_20sec1', ['org_id', 'avg_max_saves_per_20sec'], unique=False)
        batch_op.create_index('idx_org_daily_avg_max_saves_per_5sec1', ['org_id', 'avg_max_saves_per_5sec'], unique=False)
        batch_op.create_index('idx_org_daily_avg_saves_per_game1', ['org_id', 'avg_saves_per_game'], unique=False)
        batch_op.create_index('idx_org_daily_peak_max_saves_per_20sec1', ['org_id', 'peak_max_saves_per_20sec'], unique=False)
        batch_op.create_index('idx_org_daily_peak_max_saves_per_5sec1', ['org_id', 'peak_max_saves_per_5sec'], unique=False)
        batch_op.create_index('idx_org_daily_quality_score1', ['org_id', 'quality_score'], unique=False)
        batch_op.create_index('idx_org_daily_total_saves_recorded1', ['org_id', 'total_saves_recorded'], unique=False)

    with op.batch_alter_table('org_stats_scorekeeper', schema=None) as batch_op:
        batch_op.add_column(sa.Column('total_saves_recorded', sa.Integer(), nullable=True))
        batch_op.add_column(sa.Column('total_saves_recorded_rank', sa.Integer(), nullable=True))
        batch_op.add_column(sa.Column('avg_saves_per_game', sa.Float(), nullable=True))
        batch_op.add_column(sa.Column('avg_saves_per_game_rank', sa.Integer(), nullable=True))
        batch_op.add_column(sa.Column('avg_max_saves_per_5sec', sa.Float(), nullable=True))
        batch_op.add_column(sa.Column('avg_max_saves_per_5sec_rank', sa.Integer(), nullable=True))
        batch_op.add_column(sa.Column('avg_max_saves_per_20sec', sa.Float(), nullable=True))
        batch_op.add_column(sa.Column('avg_max_saves_per_20sec_rank', sa.Integer(), nullable=True))
        batch_op.add_column(sa.Column('peak_max_saves_per_5sec', sa.Integer(), nullable=True))
        batch_op.add_column(sa.Column('peak_max_saves_per_5sec_rank', sa.Integer(), nullable=True))
        batch_op.add_column(sa.Column('peak_max_saves_per_20sec', sa.Integer(), nullable=True))
        batch_op.add_column(sa.Column('peak_max_saves_per_20sec_rank', sa.Integer(), nullable=True))
        batch_op.add_column(sa.Column('quality_score', sa.Float(), nullable=True))
        batch_op.add_column(sa.Column('quality_score_rank', sa.Integer(), nullable=True))
        batch_op.create_index('idx_org_avg_max_saves_per_20sec1', ['org_id', 'avg_max_saves_per_20sec'], unique=False)
        batch_op.create_index('idx_org_avg_max_saves_per_5sec1', ['org_id', 'avg_max_saves_per_5sec'], unique=False)
        batch_op.create_index('idx_org_avg_saves_per_game1', ['org_id', 'avg_saves_per_game'], unique=False)
        batch_op.create_index('idx_org_peak_max_saves_per_20sec1', ['org_id', 'peak_max_saves_per_20sec'], unique=False)
        batch_op.create_index('idx_org_peak_max_saves_per_5sec1', ['org_id', 'peak_max_saves_per_5sec'], unique=False)
        batch_op.create_index('idx_org_quality_score1', ['org_id', 'quality_score'], unique=False)
        batch_op.create_index('idx_org_total_saves_recorded1', ['org_id', 'total_saves_recorded'], unique=False)

    with op.batch_alter_table('org_stats_weekly_scorekeeper', schema=None) as batch_op:
        batch_op.add_column(sa.Column('total_saves_recorded', sa.Integer(), nullable=True))
        batch_op.add_column(sa.Column('total_saves_recorded_rank', sa.Integer(), nullable=True))
        batch_op.add_column(sa.Column('avg_saves_per_game', sa.Float(), nullable=True))
        batch_op.add_column(sa.Column('avg_saves_per_game_rank', sa.Integer(), nullable=True))
        batch_op.add_column(sa.Column('avg_max_saves_per_5sec', sa.Float(), nullable=True))
        batch_op.add_column(sa.Column('avg_max_saves_per_5sec_rank', sa.Integer(), nullable=True))
        batch_op.add_column(sa.Column('avg_max_saves_per_20sec', sa.Float(), nullable=True))
        batch_op.add_column(sa.Column('avg_max_saves_per_20sec_rank', sa.Integer(), nullable=True))
        batch_op.add_column(sa.Column('peak_max_saves_per_5sec', sa.Integer(), nullable=True))
        batch_op.add_column(sa.Column('peak_max_saves_per_5sec_rank', sa.Integer(), nullable=True))
        batch_op.add_column(sa.Column('peak_max_saves_per_20sec', sa.Integer(), nullable=True))
        batch_op.add_column(sa.Column('peak_max_saves_per_20sec_rank', sa.Integer(), nullable=True))
        batch_op.add_column(sa.Column('quality_score', sa.Float(), nullable=True))
        batch_op.add_column(sa.Column('quality_score_rank', sa.Integer(), nullable=True))
        batch_op.create_index('idx_org_weekly_avg_max_saves_per_20sec1', ['org_id', 'avg_max_saves_per_20sec'], unique=False)
        batch_op.create_index('idx_org_weekly_avg_max_saves_per_5sec1', ['org_id', 'avg_max_saves_per_5sec'], unique=False)
        batch_op.create_index('idx_org_weekly_avg_saves_per_game1', ['org_id', 'avg_saves_per_game'], unique=False)
        batch_op.create_index('idx_org_weekly_peak_max_saves_per_20sec1', ['org_id', 'peak_max_saves_per_20sec'], unique=False)
        batch_op.create_index('idx_org_weekly_peak_max_saves_per_5sec1', ['org_id', 'peak_max_saves_per_5sec'], unique=False)
        batch_op.create_index('idx_org_weekly_quality_score1', ['org_id', 'quality_score'], unique=False)
        batch_op.create_index('idx_org_weekly_total_saves_recorded1', ['org_id', 'total_saves_recorded'], unique=False)

    # ### end Alembic commands ###


def downgrade():
    # ### commands auto generated by Alembic - please adjust! ###
    with op.batch_alter_table('org_stats_weekly_scorekeeper', schema=None) as batch_op:
        batch_op.drop_index('idx_org_weekly_total_saves_recorded1')
        batch_op.drop_index('idx_org_weekly_quality_score1')
        batch_op.drop_index('idx_org_weekly_peak_max_saves_per_5sec1')
        batch_op.drop_index('idx_org_weekly_peak_max_saves_per_20sec1')
        batch_op.drop_index('idx_org_weekly_avg_saves_per_game1')
        batch_op.drop_index('idx_org_weekly_avg_max_saves_per_5sec1')
        batch_op.drop_index('idx_org_weekly_avg_max_saves_per_20sec1')
        batch_op.drop_column('quality_score_rank')
        batch_op.drop_column('quality_score')
        batch_op.drop_column('peak_max_saves_per_20sec_rank')
        batch_op.drop_column('peak_max_saves_per_20sec')
        batch_op.drop_column('peak_max_saves_per_5sec_rank')
        batch_op.drop_column('peak_max_saves_per_5sec')
        batch_op.drop_column('avg_max_saves_per_20sec_rank')
        batch_op.drop_column('avg_max_saves_per_20sec')
        batch_op.drop_column('avg_max_saves_per_5sec_rank')
        batch_op.drop_column('avg_max_saves_per_5sec')
        batch_op.drop_column('avg_saves_per_game_rank')
        batch_op.drop_column('avg_saves_per_game')
        batch_op.drop_column('total_saves_recorded_rank')
        batch_op.drop_column('total_saves_recorded')

    with op.batch_alter_table('org_stats_scorekeeper', schema=None) as batch_op:
        batch_op.drop_index('idx_org_total_saves_recorded1')
        batch_op.drop_index('idx_org_quality_score1')
        batch_op.drop_index('idx_org_peak_max_saves_per_5sec1')
        batch_op.drop_index('idx_org_peak_max_saves_per_20sec1')
        batch_op.drop_index('idx_org_avg_saves_per_game1')
        batch_op.drop_index('idx_org_avg_max_saves_per_5sec1')
        batch_op.drop_index('idx_org_avg_max_saves_per_20sec1')
        batch_op.drop_column('quality_score_rank')
        batch_op.drop_column('quality_score')
        batch_op.drop_column('peak_max_saves_per_20sec_rank')
        batch_op.drop_column('peak_max_saves_per_20sec')
        batch_op.drop_column('peak_max_saves_per_5sec_rank')
        batch_op.drop_column('peak_max_saves_per_5sec')
        batch_op.drop_column('avg_max_saves_per_20sec_rank')
        batch_op.drop_column('avg_max_saves_per_20sec')
        batch_op.drop_column('avg_max_saves_per_5sec_rank')
        batch_op.drop_column('avg_max_saves_per_5sec')
        batch_op.drop_column('avg_saves_per_game_rank')
        batch_op.drop_column('avg_saves_per_game')
        batch_op.drop_column('total_saves_recorded_rank')
        batch_op.drop_column('total_saves_recorded')

    with op.batch_alter_table('org_stats_daily_scorekeeper', schema=None) as batch_op:
        batch_op.drop_index('idx_org_daily_total_saves_recorded1')
        batch_op.drop_index('idx_org_daily_quality_score1')
        batch_op.drop_index('idx_org_daily_peak_max_saves_per_5sec1')
        batch_op.drop_index('idx_org_daily_peak_max_saves_per_20sec1')
        batch_op.drop_index('idx_org_daily_avg_saves_per_game1')
        batch_op.drop_index('idx_org_daily_avg_max_saves_per_5sec1')
        batch_op.drop_index('idx_org_daily_avg_max_saves_per_20sec1')
        batch_op.drop_column('quality_score_rank')
        batch_op.drop_column('quality_score')
        batch_op.drop_column('peak_max_saves_per_20sec_rank')
        batch_op.drop_column('peak_max_saves_per_20sec')
        batch_op.drop_column('peak_max_saves_per_5sec_rank')
        batch_op.drop_column('peak_max_saves_per_5sec')
        batch_op.drop_column('avg_max_saves_per_20sec_rank')
        batch_op.drop_column('avg_max_saves_per_20sec')
        batch_op.drop_column('avg_max_saves_per_5sec_rank')
        batch_op.drop_column('avg_max_saves_per_5sec')
        batch_op.drop_column('avg_saves_per_game_rank')
        batch_op.drop_column('avg_saves_per_game')
        batch_op.drop_column('total_saves_recorded_rank')
        batch_op.drop_column('total_saves_recorded')

    with op.batch_alter_table('division_stats_weekly_scorekeeper', schema=None) as batch_op:
        batch_op.drop_index('idx_division_weekly_total_saves_recorded1')
        batch_op.drop_index('idx_division_weekly_quality_score1')
        batch_op.drop_index('idx_division_weekly_peak_max_saves_per_5sec1')
        batch_op.drop_index('idx_division_weekly_peak_max_saves_per_20sec1')
        batch_op.drop_index('idx_division_weekly_avg_saves_per_game1')
        batch_op.drop_index('idx_division_weekly_avg_max_saves_per_5sec1')
        batch_op.drop_index('idx_division_weekly_avg_max_saves_per_20sec1')
        batch_op.drop_column('quality_score_rank')
        batch_op.drop_column('quality_score')
        batch_op.drop_column('peak_max_saves_per_20sec_rank')
        batch_op.drop_column('peak_max_saves_per_20sec')
        batch_op.drop_column('peak_max_saves_per_5sec_rank')
        batch_op.drop_column('peak_max_saves_per_5sec')
        batch_op.drop_column('avg_max_saves_per_20sec_rank')
        batch_op.drop_column('avg_max_saves_per_20sec')
        batch_op.drop_column('avg_max_saves_per_5sec_rank')
        batch_op.drop_column('avg_max_saves_per_5sec')
        batch_op.drop_column('avg_saves_per_game_rank')
        batch_op.drop_column('avg_saves_per_game')
        batch_op.drop_column('total_saves_recorded_rank')
        batch_op.drop_column('total_saves_recorded')

    with op.batch_alter_table('division_stats_scorekeeper', schema=None) as batch_op:
        batch_op.drop_index('idx_division_total_saves_recorded1')
        batch_op.drop_index('idx_division_quality_score1')
        batch_op.drop_index('idx_division_peak_max_saves_per_5sec1')
        batch_op.drop_index('idx_division_peak_max_saves_per_20sec1')
        batch_op.drop_index('idx_division_avg_saves_per_game1')
        batch_op.drop_index('idx_division_avg_max_saves_per_5sec1')
        batch_op.drop_index('idx_division_avg_max_saves_per_20sec1')
        batch_op.drop_column('quality_score_rank')
        batch_op.drop_column('quality_score')
        batch_op.drop_column('peak_max_saves_per_20sec_rank')
        batch_op.drop_column('peak_max_saves_per_20sec')
        batch_op.drop_column('peak_max_saves_per_5sec_rank')
        batch_op.drop_column('peak_max_saves_per_5sec')
        batch_op.drop_column('avg_max_saves_per_20sec_rank')
        batch_op.drop_column('avg_max_saves_per_20sec')
        batch_op.drop_column('avg_max_saves_per_5sec_rank')
        batch_op.drop_column('avg_max_saves_per_5sec')
        batch_op.drop_column('avg_saves_per_game_rank')
        batch_op.drop_column('avg_saves_per_game')
        batch_op.drop_column('total_saves_recorded_rank')
        batch_op.drop_column('total_saves_recorded')

    with op.batch_alter_table('division_stats_daily_scorekeeper', schema=None) as batch_op:
        batch_op.drop_index('idx_division_daily_total_saves_recorded1')
        batch_op.drop_index('idx_division_daily_quality_score1')
        batch_op.drop_index('idx_division_daily_peak_max_saves_per_5sec1')
        batch_op.drop_index('idx_division_daily_peak_max_saves_per_20sec1')
        batch_op.drop_index('idx_division_daily_avg_saves_per_game1')
        batch_op.drop_index('idx_division_daily_avg_max_saves_per_5sec1')
        batch_op.drop_index('idx_division_daily_avg_max_saves_per_20sec1')
        batch_op.drop_column('quality_score_rank')
        batch_op.drop_column('quality_score')
        batch_op.drop_column('peak_max_saves_per_20sec_rank')
        batch_op.drop_column('peak_max_saves_per_20sec')
        batch_op.drop_column('peak_max_saves_per_5sec_rank')
        batch_op.drop_column('peak_max_saves_per_5sec')
        batch_op.drop_column('avg_max_saves_per_20sec_rank')
        batch_op.drop_column('avg_max_saves_per_20sec')
        batch_op.drop_column('avg_max_saves_per_5sec_rank')
        batch_op.drop_column('avg_max_saves_per_5sec')
        batch_op.drop_column('avg_saves_per_game_rank')
        batch_op.drop_column('avg_saves_per_game')
        batch_op.drop_column('total_saves_recorded_rank')
        batch_op.drop_column('total_saves_recorded')

    # ### end Alembic commands ###
